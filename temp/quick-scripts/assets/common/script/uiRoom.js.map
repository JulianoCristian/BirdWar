{"version":3,"sources":["uiRoom.js"],"names":["uiPanel","require","mvs","GLB","cc","Class","extends","properties","onLoad","_super","players","roomId","roomInfo","owner","playerPrefab","nodeDict","active","on","quit","startGame","clientEvent","eventType","joinRoomNotify","leaveRoomResponse","leaveRoomNotify","kickPlayerResponse","kickPlayerNotify","leaveRoomMedNotify","i","MAX_PLAYER_COUNT","temp","instantiate","parent","roomUserInfo","getComponent","init","push","data","j","length","userId","kickPlayerRsp","userID","userInfo","id","isRoomOwner","uiFunc","closeUI","node","name","destroy","setData","ownerId","leaveRoomRsp","status","console","log","refreshStartBtn","leaveRoomInfo","spNode","btn","Button","color","Color","WHITE","enabled","interactable","engine","leaveRoom","openUI","obj","uiTip","bind","userIds","playerCnt","result","joinOver","playerUserIds","msg","action","GAME_START_EVENT","Game","GameManager","sendEventEx","createRoomInit","rsp","roomID","joinRoomInit","roomUserInfoList","sort","a","b","onDestroy","off"],"mappings":"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","file":"uiRoom.js","sourceRoot":"../../../../../assets/common/script","sourcesContent":["var uiPanel = require(\"uiPanel\");\nvar mvs = require(\"Matchvs\");\nvar GLB = require(\"Glb\");\ncc.Class({\n    extends: uiPanel,\n    properties: {},\n\n    onLoad() {\n        this._super();\n        this.players = [];\n        this.roomId = 0;\n        this.roomInfo = null;\n        this.owner = 0;\n        this.playerPrefab = this.nodeDict[\"player\"];\n        this.playerPrefab.active = false;\n        this.nodeDict[\"quit\"].on(\"click\", this.quit, this);\n        this.nodeDict[\"startGame\"].on(\"click\", this.startGame, this);\n\n\n        clientEvent.on(clientEvent.eventType.joinRoomNotify, this.joinRoomNotify, this);\n        clientEvent.on(clientEvent.eventType.leaveRoomResponse, this.leaveRoomResponse, this);\n        clientEvent.on(clientEvent.eventType.leaveRoomNotify, this.leaveRoomNotify, this);\n        clientEvent.on(clientEvent.eventType.kickPlayerResponse, this.kickPlayerResponse, this);\n        clientEvent.on(clientEvent.eventType.kickPlayerNotify, this.kickPlayerNotify, this);\n        clientEvent.on(clientEvent.eventType.leaveRoomMedNotify, this.leaveRoomMedNotify, this);\n\n        for (var i = 0; i < GLB.MAX_PLAYER_COUNT; i++) {\n            var temp = cc.instantiate(this.playerPrefab);\n            temp.active = true;\n            temp.parent = this.nodeDict[\"layout\"];\n            var roomUserInfo = temp.getComponent('roomUserInfo');\n            roomUserInfo.init();\n            this.players.push(roomUserInfo);\n        }\n    },\n\n    kickPlayerResponse: function(data) {\n        for (var j = 0; j < this.players.length; j++) {\n            if (this.players[j].userId === data.kickPlayerRsp.userID) {\n                this.players[j].init();\n                break;\n            }\n        }\n        if (GLB.userInfo.id === data.kickPlayerRsp.userID) {\n            GLB.isRoomOwner = false;\n            uiFunc.closeUI(this.node.name);\n            this.node.destroy();\n        }\n    },\n\n    kickPlayerNotify: function(data) {\n        for (var j = 0; j < this.players.length; j++) {\n            if (this.players[j].userId === data.kickPlayerNotify.userId) {\n                this.players[j].init();\n                break;\n            }\n        }\n\n        if (GLB.userInfo.id === data.kickPlayerNotify.userId) {\n            GLB.isRoomOwner = false;\n            uiFunc.closeUI(this.node.name);\n            this.node.destroy();\n        }\n    },\n\n    joinRoomNotify: function(data) {\n        for (var j = 0; j < this.players.length; j++) {\n            if (this.players[j].userId === 0) {\n                this.players[j].setData(data.roomUserInfo.userId, this.ownerId);\n                break;\n            }\n        }\n    },\n\n    leaveRoomResponse: function(data) {\n        if (data.leaveRoomRsp.status === 200) {\n            console.log(\"离开房间成功！\");\n        } else {\n            console.log(\"离开房间失败\");\n        }\n        GLB.isRoomOwner = false;\n        uiFunc.closeUI(this.node.name);\n        this.node.destroy();\n    },\n\n    leaveRoomMedNotify: function(data) {\n        for (var j = 0; j < this.players.length; j++) {\n            if (this.players[j].userId === data.userID) {\n                this.players[j].init();\n                break;\n            }\n        }\n        this.ownerId = data.owner;\n        if (this.ownerId === GLB.userInfo.id) {\n            GLB.isRoomOwner = true;\n        }\n        for (var i = 0; i < this.players.length; i++) {\n            if (this.players[i].userId !== 0) {\n                this.players[i].setData(this.players[i].userId, this.ownerId);\n            }\n        }\n        this.refreshStartBtn();\n    },\n\n    leaveRoomNotify: function(data) {\n        for (var j = 0; j < this.players.length; j++) {\n            if (this.players[j].userId === data.leaveRoomInfo.userId) {\n                this.players[j].init();\n                break;\n            }\n        }\n        this.ownerId = data.leaveRoomInfo.owner;\n        if (this.ownerId === GLB.userInfo.id) {\n            GLB.isRoomOwner = true;\n        }\n        for (var i = 0; i < this.players.length; i++) {\n            if (this.players[i].userId !== 0) {\n                this.players[i].setData(this.players[i].userId, this.ownerId);\n            }\n        }\n        this.refreshStartBtn();\n    },\n\n    refreshStartBtn() {\n        var spNode = this.nodeDict[\"startGame\"];\n        var btn = this.nodeDict[\"startGame\"].getComponent(cc.Button);\n        if (GLB.isRoomOwner) {\n            spNode.color = cc.Color.WHITE;\n            btn.enabled = true;\n        } else {\n            //spNode.color = cc.Color.BLACK;\n            btn.getComponent(cc.Button).interactable = false;\n            //btn.enabled = false;\n        }\n    },\n\n    quit: function() {\n        mvs.engine.leaveRoom(\"\");\n        GLB.MAX_PLAYER_COUNT = 4;\n\n    },\n\n    startGame: function() {\n        if (!GLB.isRoomOwner) {\n            uiFunc.openUI(\"uiTip\", function(obj) {\n                var uiTip = obj.getComponent(\"uiTip\");\n                if (uiTip) {\n                    uiTip.setData(\"等待房主开始游戏\");\n                }\n            }.bind(this));\n            return;\n        }\n        var userIds = [];\n        var playerCnt = 0;\n        for (var j = 0; j < this.players.length; j++) {\n            if (this.players[j].userId !== 0) {\n                playerCnt++;\n                userIds.push(this.players[j].userId);\n            }\n        }\n\n\n        if (playerCnt === GLB.MAX_PLAYER_COUNT) {\n            var result = mvs.engine.joinOver(\"\");\n            console.log(\"发出关闭房间的通知\");\n            if (result !== 0) {\n                console.log(\"关闭房间失败，错误码：\", result);\n            }\n\n            GLB.playerUserIds = userIds;\n\n            var msg = {\n                action: GLB.GAME_START_EVENT,\n                userIds: userIds\n            };\n            Game.GameManager.sendEventEx(msg);\n        } else {\n            uiFunc.openUI(\"uiTip\", function(obj) {\n                var uiTip = obj.getComponent(\"uiTip\");\n                if (uiTip) {\n                    uiTip.setData(\"房间人数不足\");\n                }\n            }.bind(this));\n        }\n    },\n\n    createRoomInit(rsp) {\n        this.roomId = rsp.roomID;\n        this.ownerId = rsp.owner;\n        this.players[0].setData(this.ownerId, this.ownerId);\n        GLB.isRoomOwner = true;\n        this.refreshStartBtn();\n    },\n\n    joinRoomInit(roomUserInfoList, roomInfo) {\n        roomUserInfoList.sort(function(a, b) {\n            if (roomInfo.ownerId === b.userId) {\n                return 1;\n            }\n            return 0;\n        });\n        this.ownerId = roomInfo.ownerId;\n        for (var j = 0; j < roomUserInfoList.length; j++) {\n            this.players[j].setData(roomUserInfoList[j].userId, this.ownerId);\n        }\n        this.refreshStartBtn();\n    },\n\n    onDestroy() {\n        clientEvent.off(clientEvent.eventType.joinRoomNotify, this.joinRoomNotify, this);\n        clientEvent.off(clientEvent.eventType.leaveRoomResponse, this.leaveRoomResponse, this);\n        clientEvent.off(clientEvent.eventType.leaveRoomNotify, this.leaveRoomNotify, this);\n        clientEvent.off(clientEvent.eventType.kickPlayerResponse, this.kickPlayerResponse, this);\n        clientEvent.off(clientEvent.eventType.kickPlayerNotify, this.kickPlayerNotify, this);\n        clientEvent.off(clientEvent.eventType.leaveRoomMedNotify, this.leaveRoomMedNotify, this);\n    }\n});\n"]}